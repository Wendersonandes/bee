function card_flag(){PagSeguroDirectPayment.getBrand({cardBin:$("#card-number").val(),success:function(n){console.log(n),$("#card-flag").html(n.brand.name),$("#card-flag").show(),showPaymentOptions(n.brand.name,$("#price").val()),$("#card-options-box").show(),n.brand.cvvSize>0&&$("#card-cvv-box").show()},error:function(n){console.log($("#card-number").val()),console.log(n),$("#card-flag").hide(),$("#card-cvv-box").hide(),$("#card-options-box").hide()}})}function getCardToken(n,a,o,e){console.log(o),console.log(e);var t={cardNumber:n,cvv:a,expirationMonth:o,expirationYear:e,success:function(n){console.log(n)},error:function(n){console.log(n)}};PagSeguroDirectPayment.createCardToken(t)}function showPaymentOptions(n,a){PagSeguroDirectPayment.getInstallments({amount:a,brand:n,success:function(a){$("#card-options").html(""),$.each(a.installments[n],function(n,a){$("#card-options").append($("<option></option>").attr("value",a.quantity).text("$"+a.installmentAmount+" x "+a.quantity+" - total: $"+a.totalAmount))})},error:function(n){console.log(n)},complete:function(n){}})}$(document).ready(function(){PagSeguroDirectPayment.setSessionId($("#session_id").val()),card_flag(),$("#buy-button").click(function(){$("#sender_hash").val(PagSeguroDirectPayment.getSenderHash());var n={cardNumber:$("#card-number").val(),cvv:$("#card-cvv").val(),expirationMonth:$("#card-month").val(),expirationYear:$("#card-year").val(),success:function(n){$("#card_token").val(n.card.token),$("#payment-datas").hide(),$("#finish-buy").fadeIn()},error:function(n){alert("As informa\xe7\xf5es sobre o cart\xe3o est\xe3o incorretas")}};PagSeguroDirectPayment.createCardToken(n)}),$("#edit-payment").click(function(){$("#finish-buy").hide(),$("#payment-datas").fadeIn()}),$("#card-number").on("input",function(){card_flag()})});