function bloqueio(){"erro_bloq"==$(".erro_bloq").attr("class")?$("#buy-button").prop("disabled",!0):$("#buy-button").prop("disabled",!1)}function verificacao(){var e,o;$(document).on("keyup click","input:focus",function(){var r=0;o=$(this).attr("name"),e=$(this).val(),console.log(o),console.log(e),"name"==o?(r=apenasLetras(e),msgDeErro(r,"erro_name","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"email"==o?(r=apenasEmail(e),msgDeErro(r,"erro_email","*Formato de email inv\xe1lido")):"cpf"==o?(r=apenasNum(e),msgDeErro(r,"erro_cpf","*Utilize apenas numeros")):"phone_code"==o?(r=apenasNum(e),msgDeErro(r,"erro_phone_code","*Utilize apenas numeros")):"phone_number"==o?(r=apenasNum(e),msgDeErro(r,"erro_phone_number","*Utilize apenas numeros")):"birthday"==o?(r=apenasData(e),msgDeErro(r,"erro_birthday","*Formato inv\xe1lido")):"street"==o||("number"==o?(r=apenasNum(e),msgDeErro(r,"erro_number","*Utilize apenas numeros")):"complement"==o||("district"==o?(r=apenasLetras(e),msgDeErro(r,"erro_district","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"city"==o?(r=apenasLetras(e),msgDeErro(r,"erro_city","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"state"==o?(r=apenasLetras(e),msgDeErro(r,"erro_state","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"postal_code"==o?(r=apenasNum(e),msgDeErro(r,"erro_postal_code","*Utilize apenas numeros")):"card_name"==o?(r=apenasLetras(e),msgDeErro(r,"erro_card_name","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"card-number"==o&&(r=apenasNum(e),msgDeErro(r,"erro_card-number","*Utilize apenas numeros")))),bloqueio()}),$(document).on("click","#card-options",function(){var e,o,r;ParcelaCartao(e,o,r)})}function apenasEmail(e){var o=0,r=e.indexOf("@"),a=e.indexOf(".com"),n=e.indexOf(".org"),t=e.indexOf(".net");return e.length>0&&(r==-1||a==-1&&n==-1&&t==-1)&&(o=-1),o}function apenasData(e){var o=0;return e[0]>="0"&&e[0]<="9"&&e[1]>="0"&&e[1]<="9"&&e[3]>="0"&&e[3]<="9"&&e[4]>="0"&&e[4]<="9"&&e[6]>="0"&&e[6]<="9"&&e[7]>="0"&&e[7]<="9"&&e[8]>="0"&&e[8]<="9"&&e[9]>="0"&&e[9]<="9"&&"/"==e[2]&&"/"==e[5]||(o=-1),o}function apenasLetras(e){for(var o,r=0,a=0;a<e.length;a++)o=e[a],o>="A"&&o<="Z"||o>="a"&&o<="z"||" "==o||(r-=1);return r}function apenasNum(e){for(var o,r=0,a=0;a<e.length;a++)o=e[a],o>="0"&&o<="9"||(r-=1);return r}function apenasNumLetra(e){for(var o,r=0,a=0;a<e.length;a++)o=e[a],o>="A"&&o<="Z"||o>="a"&&o<="z"||" "==o||o>="0"&&o<="9"||(r-=1);return r}function msgDeErro(e,o,r){$("#"+o).remove(),e<0&&$("input:focus").parent().after('<p1 class="erro_bloq" id="'+o+'" style="color:red;">'+r+"</p1>")}function msgDeVazio(e,o,r,a){$("#"+r).remove(),e<0&&$(o).parent().after('<p1 class="erro_bloq" id="'+r+'" style="color:red;">'+a+"</p1>")}function getNumber(e,o){var r=0;if(r=o.indexOf(e),r+=e.length,console.log("teste:"+r),r!==-1){var a="";for(console.log("LADY2");(o[r]>="0"&&o[r]<="9"||"."==o[r])&&r<=o.length;)a+=o[r],r++;console.log("testeN:"+a)}return a}function ParcelaCartao(e,o){if("none"!=$("#card-options-box").css("display")){var r=$("#card-options :selected").text();console.log("LADY GAGA"+r),o=getNumber("$",r),e=getNumber("x ",r),getNumber(": $",r),console.log(e,o),$("#parcela").val(o),$("#quantidade").val(e),console.log($("#quantidade").val(),$("#parcela").val())}}function card_flag(){PagSeguroDirectPayment.getBrand({cardBin:$("#card-number").val(),success:function(e){console.log(e),$("#card-flag").html(e.brand.name),$("#card-flag").show(),showPaymentOptions(e.brand.name,$("#price").val()),$("#card-options-box").show(),e.brand.cvvSize>0&&$("#card-cvv-box").show()},error:function(e){console.log($("#card-number").val()),console.log(e),$("#card-flag").hide(),$("#card-cvv-box").hide(),$("#card-options-box").hide()}})}function getCardToken(e,o,r,a){console.log(r),console.log(a);var n={cardNumber:e,cvv:o,expirationMonth:r,expirationYear:a,success:function(e){console.log(e)},error:function(e){console.log(e)}};PagSeguroDirectPayment.createCardToken(n)}function showPaymentOptions(e,o){PagSeguroDirectPayment.getInstallments({amount:o,brand:e,success:function(o){$("#card-options").html(""),$.each(o.installments[e],function(e,o){$("#card-options").append($("<option></option>").attr("value",o.quantity).text("$"+o.installmentAmount+" x "+o.quantity+" - total: $"+o.totalAmount))})},error:function(e){console.log(e)},complete:function(){}})}$(document).ready(function(){document.getElementById("carrinho")&&(PagSeguroDirectPayment.setSessionId($("#session_id").val()),card_flag(),verificacao(),$("#buy-button").click(function(){$("#sender_hash").val(PagSeguroDirectPayment.getSenderHash());var e={cardNumber:$("#card-number").val(),cvv:$("#card-cvv").val(),expirationMonth:$("#card-month").val(),expirationYear:$("#card-year").val(),success:function(e){$("#card_token").val(e.card.token),$("#payment-datas").hide(),$("#finish-buy").fadeIn()},error:function(){alert("As informa\xe7\xf5es sobre o cart\xe3o est\xe3o incorretas")}};PagSeguroDirectPayment.createCardToken(e)}),$("#edit-payment").click(function(){$("#finish-buy").hide(),$("#payment-datas").fadeIn()}),$("#card-number").on("input",function(){card_flag()}))});