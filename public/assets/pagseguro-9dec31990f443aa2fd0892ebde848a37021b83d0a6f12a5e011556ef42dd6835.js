function bloqueio(){"erro_bloq"==$(".erro_bloq").attr("class")?$("#buy-button").prop("disabled",!0):$("#buy-button").prop("disabled",!1)}function verificacao(){var e,r;$(document).on("keyup click","input:focus",function(){var a=0;r=$(this).attr("name"),e=$(this).val(),console.log(r),console.log(e),"name"==r?(a=apenasLetras(e),msgDeErro(a,"erro_name","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"email"==r?(a=apenasEmail(e),msgDeErro(a,"erro_email","*Formato de email inv\xe1lido")):"cpf"==r?(a=apenasNum(e),msgDeErro(a,"erro_cpf","*Utilize apenas numeros")):"phone_code"==r?(a=apenasNum(e),msgDeErro(a,"erro_phone_code","*Utilize apenas numeros")):"phone_number"==r?(a=apenasNum(e),msgDeErro(a,"erro_phone_number","*Utilize apenas numeros")):"birthday"==r?(a=apenasData(e),msgDeErro(a,"erro_birthday","*Formato inv\xe1lido")):"street"==r||("number"==r?(a=apenasNum(e),msgDeErro(a,"erro_number","*Utilize apenas numeros")):"complement"==r||("district"==r?(a=apenasLetras(e),msgDeErro(a,"erro_district","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"city"==r?(a=apenasLetras(e),msgDeErro(a,"erro_city","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"state"==r?(a=apenasLetras(e),msgDeErro(a,"erro_state","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"postal_code"==r?(a=apenasNum(e),msgDeErro(a,"erro_postal_code","*Utilize apenas numeros")):"card_name"==r?(a=apenasLetras(e),msgDeErro(a,"erro_card_name","*Numeros e Caracteres especiais n\xe3o s\xe3o permitidos")):"card-number"==r&&(a=apenasNum(e),msgDeErro(a,"erro_card-number","*Utilize apenas numeros")))),bloqueio()})}function apenasEmail(e){var r=0,a=e.indexOf("@"),o=e.indexOf(".com"),n=e.indexOf(".org"),t=e.indexOf(".net");return e.length>0&&(a==-1||o==-1&&n==-1&&t==-1)&&(r=-1),r}function apenasData(e){var r=0;return e[0]>="0"&&e[0]<="9"&&e[1]>="0"&&e[1]<="9"&&e[3]>="0"&&e[3]<="9"&&e[4]>="0"&&e[4]<="9"&&e[6]>="0"&&e[6]<="9"&&e[7]>="0"&&e[7]<="9"&&e[8]>="0"&&e[8]<="9"&&e[9]>="0"&&e[9]<="9"&&"/"==e[2]&&"/"==e[5]||(r=-1),r}function apenasLetras(e){for(var r,a=0,o=0;o<e.length;o++)r=e[o],r>="A"&&r<="Z"||r>="a"&&r<="z"||" "==r||(a-=1);return a}function apenasNum(e){for(var r,a=0,o=0;o<e.length;o++)r=e[o],r>="0"&&r<="9"||(a-=1);return a}function apenasNumLetra(e){for(var r,a=0,o=0;o<e.length;o++)r=e[o],r>="A"&&r<="Z"||r>="a"&&r<="z"||" "==r||r>="0"&&r<="9"||(a-=1);return a}function msgDeErro(e,r,a){$("#"+r).remove(),e<0&&$("input:focus").parent().after('<p1 class="erro_bloq" id="'+r+'" style="color:red;">'+a+"</p1>")}function msgDeVazio(e,r,a,o){$("#"+a).remove(),e<0&&$(r).parent().after('<p1 class="erro_bloq" id="'+a+'" style="color:red;">'+o+"</p1>")}function getNumber(e,r){var a=0;if(a=r.indexOf(e),a+=e.length,console.log("teste:"+a),a!==-1){var o="";for(console.log("LADY2");(r[a]>="0"&&r[a]<="9"||"."==r[a])&&a<=r.length;)o+=r[a],a++;console.log("testeN:"+o)}return o}function ParcelaCartao(e,r){var a=$("#card-options :selected").text();console.log("LADY GAGA"+a),r=getNumber("$",a),e=getNumber("x ",a),getNumber(": $",a),console.log(e,r),$("#parcela").val(r),$("#quantidade").val(e),console.log($("#quantidade").val(),$("#parcela").val())}function card_flag(){PagSeguroDirectPayment.getBrand({cardBin:$("#card-number").val(),success:function(e){console.log(e),$("#card-flag").html(e.brand.name),$("#card-flag").show(),showPaymentOptions(e.brand.name,$("#price").val()),$("#card-options-box").show(),e.brand.cvvSize>0&&$("#card-cvv-box").show()},error:function(e){console.log($("#card-number").val()),console.log(e),$("#card-flag").hide(),$("#card-cvv-box").hide(),$("#card-options-box").hide()}})}function getCardToken(e,r,a,o){console.log(a),console.log(o);var n={cardNumber:e,cvv:r,expirationMonth:a,expirationYear:o,success:function(e){console.log(e)},error:function(e){console.log(e)}};PagSeguroDirectPayment.createCardToken(n)}function showPaymentOptions(e,r){PagSeguroDirectPayment.getInstallments({amount:r,brand:e,success:function(r){$("#card-options").html(""),$.each(r.installments[e],function(e,r){$("#card-options").append($("<option></option>").attr("value",r.quantity).text("$"+r.installmentAmount+" x "+r.quantity+" - total: $"+r.totalAmount))})},error:function(e){console.log(e)},complete:function(){}})}$(document).ready(function(){document.getElementById("carrinho")&&(PagSeguroDirectPayment.setSessionId($("#session_id").val()),card_flag(),verificacao(),$("#buy-button").click(function(){$("#sender_hash").val(PagSeguroDirectPayment.getSenderHash());var e,r,a;ParcelaCartao(e,r,a);var o={cardNumber:$("#card-number").val(),cvv:$("#card-cvv").val(),expirationMonth:$("#card-month").val(),expirationYear:$("#card-year").val(),success:function(e){$("#card_token").val(e.card.token),$("#payment-datas").hide(),$("#finish-buy").fadeIn()},error:function(){alert("As informa\xe7\xf5es sobre o cart\xe3o est\xe3o incorretas")}};PagSeguroDirectPayment.createCardToken(o)}),$("#edit-payment").click(function(){$("#finish-buy").hide(),$("#payment-datas").fadeIn()}),$("#card-number").on("input",function(){card_flag()}))});